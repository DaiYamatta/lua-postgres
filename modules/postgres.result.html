<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<head>
    <title>postgres.result: Module Index</title>
    <link rel="stylesheet" href="../luadoc.css" type="text/css" />
	<!--meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/-->
</head>

<body>
<div id="container">

<div id="product">
	<div id="product_logo"></div>
	<div id="product_name"><big><b></b></big></div>
	<div id="product_description"></div>
</div> <!-- id="product" -->

<div id="main">

<div id="navigation">


<h2>LuaDoc</h2>
<ul>
	
	<li><a href="../index.html">Index</a></li>
	
</ul>


<!-- Module list -->

<h2>Modules</h2>
<ul>

	<li>
		<a href="../modules/postgres.html">postgres</a>
	</li>

	<li>
		<a href="../modules/postgres.connection.html">postgres.connection</a>
	</li>

	<li>
		<a href="../modules/postgres.field.html">postgres.field</a>
	</li>

	<li><strong>postgres.result</strong></li>
	
</ul>



<!-- File list -->






</div><!-- id="navigation" -->

<div id="content">

<h1>Module "postgres.result"</h1>

<p>A Postgres result.
Postgres results respond to the __len and __call metamethods, so it's possible to
perform most useful operations on a result without directly invoking methods.
The example below shows the recommended way to access the rows in a result.

<h3>Example:</h3>
<pre class="example">
local result = conn:execute("SELECT * FROM members LIMIT 10")
assert(10 == #result)
for row, index in result do
  print(string.format("Info for result %d:", index))
  print(row.id, row.name, row.email)
end
</pre>
Lua Postgres also sets a __gc metamethod on results, so there usually is no
need to free the result when you're done with it. Lua's garbage collection
will take care of this automatically. However, you can manually free the result
if you choose.</p>





<h2>Functions</h2>
<table class="function_list">

	<tr>
	<td class="name" nowrap><a href="#fetch">fetch</a>&nbsp;()</td>
	<td class="summary">Fetches a row numerically, and advances the internal pointer to the next row.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#fetch_assoc">fetch_assoc</a>&nbsp;()</td>
	<td class="summary">Fetches a row as an associative array, and advances the internal pointer to the next row.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#fields">fields</a>&nbsp;()</td>
	<td class="summary">Gets an array of fields in the result set.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#free">free</a>&nbsp;()</td>
	<td class="summary">Frees the memory used by a result.</td>
	</tr>

	<tr>
	<td class="name" nowrap><a href="#num_rows">num_rows</a>&nbsp;()</td>
	<td class="summary">Gets the number of tuples in the result.</td>
	</tr>

</table>






<br/>
<br/>



<h2><a name="functions"></a>Functions</h2>
<dl class="function">



<dt><a name="fetch"></a><strong>fetch</strong>&nbsp;()</dt>
<dd>
Fetches a row numerically, and advances the internal pointer to the next row.







<h3>Example:</h3>
<pre class="example">
local result, err = conn:execute("SELECT name FROM members LIMIT 10")
if err then error(err) end
for i = 1, #result do
  local row = result:fetch()
  print(row[1]) -- prints the name
end
</pre>



<h3>Return value:</h3>
A table



</dd>




<dt><a name="fetch_assoc"></a><strong>fetch_assoc</strong>&nbsp;()</dt>
<dd>
Fetches a row as an associative array, and advances the internal pointer to the next row.







<h3>Example:</h3>
<pre class="example">
local result, err = conn:execute("SELECT name FROM members LIMIT 10")
if err then error(err) end
for i = 1, #result do
  local row = result:fetch_assoc()
  print(row.name)
end
</pre>



<h3>Return value:</h3>
A table



</dd>




<dt><a name="fields"></a><strong>fields</strong>&nbsp;()</dt>
<dd>
Gets an array of fields in the result set.









<h3>Return value:</h3>
A table



<h3>See also:</h3>
<ul>
	
	<li><a href="../modules/postgres.field.html">
		postgres.field
	</a>
	
</ul>

</dd>




<dt><a name="free"></a><strong>free</strong>&nbsp;()</dt>
<dd>
Frees the memory used by a result. After invoking free(), any attempt to
to perform operations on the result will raise an error.











</dd>




<dt><a name="num_rows"></a><strong>num_rows</strong>&nbsp;()</dt>
<dd>
Gets the number of tuples in the result. You can also invoke this method with
the length operator (#).







<h3>Example:</h3>
<pre class="example">
assert(10 == #result)
assert(10 == result:num_rows())
</pre>



<h3>Return value:</h3>
A number



</dd>


</dl>






</div> <!-- id="content" -->

</div> <!-- id="main" -->

<div id="about">
	<p><a href="http://validator.w3.org/check?uri=referer"><img src="http://www.w3.org/Icons/valid-xhtml10" alt="Valid XHTML 1.0!" height="31" width="88" /></a></p>
</div> <!-- id="about" -->

</div> <!-- id="container" -->	
</body>
</html>
